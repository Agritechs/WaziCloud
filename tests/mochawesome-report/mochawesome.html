<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:37,&quot;tests&quot;:73,&quot;passes&quot;:55,&quot;pending&quot;:5,&quot;failures&quot;:13,&quot;start&quot;:&quot;2019-02-19T09:15:50.076Z&quot;,&quot;end&quot;:&quot;2019-02-19T09:17:43.777Z&quot;,&quot;duration&quot;:113701,&quot;testsRegistered&quot;:73,&quot;passPercent&quot;:80.9,&quot;pendingPercent&quot;:6.8,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false,&quot;passPercentClass&quot;:&quot;success&quot;,&quot;pendingPercentClass&quot;:&quot;danger&quot;},&quot;suites&quot;:{&quot;uuid&quot;:&quot;5e570321-468e-45d9-bd63-7f2d275de621&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;45d9353d-b703-4378-9f96-4ed9d71d899c&quot;,&quot;title&quot;:&quot;Users&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/users/users.test.js&quot;,&quot;file&quot;:&quot;/test/users/users.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Users \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:971,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n  withAdmin = await utils.getAdminAuth()\n  withNormal = await utils.getNormalAuth()\n} catch (err) {\n  console.log(&#x27;error:&#x27; + err)\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5cec4723-2937-47e2-9463-2e14300dec2b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Users \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n} catch (err) {\n  console.log(&#x27;error:&#x27; + err)\n  throw err\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e741ce8a-c1c0-4c86-b185-dbdcb616772f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0ba214da-8578-4856-a574-335397ba7f31&quot;,&quot;title&quot;:&quot;Get all users&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/users/users.test.js&quot;,&quot;file&quot;:&quot;/test/users/users.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all users&quot;,&quot;fullTitle&quot;:&quot;Users Get all users should return all users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:429,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let res = await getUsers().set(withAdmin)\nres.should.have.status(200);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 200 but got 403&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 200 but got 403\n    at Proxy.&lt;anonymous&gt; (node_modules/chai-http/lib/http.js:92:10)\n    at Proxy.methodWrapper (node_modules/chai/lib/chai/utils/addMethod.js:57:25)\n    at Context.it (test/users/users.test.js:44:23)\n    at processTicksAndRejections (internal/process/next_tick.js:81:5)&quot;,&quot;diff&quot;:&quot;- 403\n+ 200\n&quot;},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;45c8b4f8-2040-445d-9a30-3b34ff063ae0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;45c8b4f8-2040-445d-9a30-3b34ff063ae0&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:429,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;7d7403dd-2adc-4e29-9e55-e96278fffebb&quot;,&quot;title&quot;:&quot;Create user&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/users/users.test.js&quot;,&quot;file&quot;:&quot;/test/users/users.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new user&quot;,&quot;fullTitle&quot;:&quot;Users Create user should create a new user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;70c39e56-9560-458f-9dc2-6ea04925c88b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;70c39e56-9560-458f-9dc2-6ea04925c88b&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:null,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;8bd04550-2782-49e6-862e-eab066267166&quot;,&quot;title&quot;:&quot;Search users&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/users/users.test.js&quot;,&quot;file&quot;:&quot;/test/users/users.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should search users with specific criteria&quot;,&quot;fullTitle&quot;:&quot;Users Search users should search users with specific criteria&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f705ec45-1221-4ff9-b4e8-a81ab4f0bbb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;f705ec45-1221-4ff9-b4e8-a81ab4f0bbb7&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:null,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;e9778850-b8ad-45da-b4cb-1b0b12adf1fc&quot;,&quot;title&quot;:&quot;Get user&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/users/users.test.js&quot;,&quot;file&quot;:&quot;/test/users/users.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a specific user&quot;,&quot;fullTitle&quot;:&quot;Users Get user should get a specific user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:331,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let res2 = await getUsers(\&quot;2ecfae24-f340-4ad0-a12e-02cdc60cd8ba\&quot;).set(withAdmin)\nres2.should.have.status(200);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 200 but got 403&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 200 but got 403\n    at Proxy.&lt;anonymous&gt; (node_modules/chai-http/lib/http.js:92:10)\n    at Proxy.methodWrapper (node_modules/chai/lib/chai/utils/addMethod.js:57:25)\n    at Context.it (test/users/users.test.js:62:24)\n    at processTicksAndRejections (internal/process/next_tick.js:81:5)&quot;,&quot;diff&quot;:&quot;- 403\n+ 200\n&quot;},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;73dc46e4-2361-46f2-b8d4-9bb169bc9e49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;73dc46e4-2361-46f2-b8d4-9bb169bc9e49&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:331,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;119698a2-4960-4ced-93ee-bb95d465b45a&quot;,&quot;title&quot;:&quot;update user&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/users/users.test.js&quot;,&quot;file&quot;:&quot;/test/users/users.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update user data&quot;,&quot;fullTitle&quot;:&quot;Users update user should update user data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9b8d48b7-c995-44fd-baff-249b2cf3d2fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;9b8d48b7-c995-44fd-baff-249b2cf3d2fa&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:null,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;cb230fa6-6e67-46b9-a2a4-1b0de940256b&quot;,&quot;title&quot;:&quot;Remove user&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/users/users.test.js&quot;,&quot;file&quot;:&quot;/test/users/users.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove a user&quot;,&quot;fullTitle&quot;:&quot;Users Remove user should remove a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1cce51a0-ae1b-4369-a0a3-8ee1b25c1e22&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;1cce51a0-ae1b-4369-a0a3-8ee1b25c1e22&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:null,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;cb46e49d-830e-4e93-a478-654c26d93a66&quot;,&quot;title&quot;:&quot;Sensor-data&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/sensor-data.test.js&quot;,&quot;file&quot;:&quot;/test/devices/sensor-data.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Sensor-data \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1407,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n  withAdmin = await utils.getAdminAuth()\n  withNormal = await utils.getNormalAuth()\n  await deleteDevice(device.id).set(withAdmin)\n} catch (err) {\n  console.log(&#x27;error:&#x27; + err)\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e8fc9107-3b69-427e-8b91-18958484cb7d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Sensor-data \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:602,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n  await deleteDevice(device.id).set(withAdmin)\n} catch (err) {\n  console.log(&#x27;error:&#x27; + err)\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e99a4411-37da-4d10-b91c-ca68b1401455&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8a04b236-92c2-4fb7-93a8-252f297c6b63&quot;,&quot;title&quot;:&quot;push sensor data&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/sensor-data.test.js&quot;,&quot;file&quot;:&quot;/test/devices/sensor-data.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;data is pushed&quot;,&quot;fullTitle&quot;:&quot;Sensor-data push sensor data data is pushed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1507,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const resC = await createDevice(device).set(withAdmin);\nresC.should.have.status(204);\nlet res = await pushSensorValue(sensor.id, {\&quot;value\&quot;: \&quot;25.6\&quot;, \&quot;timestamp\&quot;: \&quot;2016-06-08T18:20:27.873Z\&quot;}).set(withAdmin);\nres.should.have.status(204);\nlet res3 = await getSensorData(sensor.id).set(withAdmin)\nchai.expect(res3.body[0]).to.deep.include({\&quot;value\&quot;: \&quot;25.6\&quot;, \&quot;timestamp\&quot;: \&quot;2016-06-08T18:20:27.873Z\&quot;});\n//res3.body[0].should.have.property(&#x27;date_received&#x27;);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9bfa6f36-e140-4517-bf48-b86bf3d313da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;number data is pushed&quot;,&quot;fullTitle&quot;:&quot;Sensor-data push sensor data number data is pushed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1677,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const resC = await createDevice(device).set(withAdmin);\nresC.should.have.status(204);\nlet res = await pushSensorValue(sensor.id, {\&quot;value\&quot;: 25.6})\nres.should.have.status(204);\nlet res3 = await getSensorData(sensor.id).set(withAdmin)\nres3.body[0].should.deep.include({\&quot;value\&quot;: 25.6});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3ddda3cb-82bf-4d61-b333-c5f39c503a63&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;string data is pushed&quot;,&quot;fullTitle&quot;:&quot;Sensor-data push sensor data string data is pushed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1547,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const resC = await createDevice(device).set(withAdmin);\nresC.should.have.status(204);\nlet res = await pushSensorValue(sensor.id, {\&quot;value\&quot;: \&quot;A\&quot;})\nres.should.have.status(204);\nlet res3 = await getSensorData(sensor.id).set(withAdmin)\nres3.body[0].should.deep.include({\&quot;value\&quot;: \&quot;A\&quot;});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;66eab484-9bc3-43d2-a81f-a3cc0c3380a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;boolean data is pushed&quot;,&quot;fullTitle&quot;:&quot;Sensor-data push sensor data boolean data is pushed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1743,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const resC = await createDevice(device).set(withAdmin);\nresC.should.have.status(204);\nlet res = await pushSensorValue(sensor.id, {\&quot;value\&quot;: true})\nres.should.have.status(204);\nlet res3 = await getSensorData(sensor.id).set(withAdmin)\nres3.body[0].should.deep.include({\&quot;value\&quot;: true});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a7c5563d-6cd2-4bf5-ac3e-49bfb077c8a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;array data is pushed&quot;,&quot;fullTitle&quot;:&quot;Sensor-data push sensor data array data is pushed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1637,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const resC = await createDevice(device).set(withAdmin);\nresC.should.have.status(204);\nlet res = await pushSensorValue(sensor.id, {\&quot;value\&quot;: [true]})\nres.should.have.status(204);\nlet res3 = await getSensorData(sensor.id).set(withAdmin)\nres3.body[0].should.deep.include({\&quot;value\&quot;: [true]});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b10c2912-65d1-4874-837b-340f2bbcec41&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;object data is pushed&quot;,&quot;fullTitle&quot;:&quot;Sensor-data push sensor data object data is pushed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1553,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const resC = await createDevice(device).set(withAdmin);\nresC.should.have.status(204);\nlet res = await pushSensorValue(sensor.id, {\&quot;value\&quot;: {a:1, b:\&quot;2\&quot;}})\nres.should.have.status(204);\nlet res3 = await getSensorData(sensor.id).set(withAdmin)\nres3.body[0].should.deep.include({\&quot;value\&quot;: {a:1, b:\&quot;2\&quot;}});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5770cb65-6a7e-4fab-8541-f2c669ae0f31&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9bfa6f36-e140-4517-bf48-b86bf3d313da&quot;,&quot;3ddda3cb-82bf-4d61-b333-c5f39c503a63&quot;,&quot;66eab484-9bc3-43d2-a81f-a3cc0c3380a2&quot;,&quot;a7c5563d-6cd2-4bf5-ac3e-49bfb077c8a6&quot;,&quot;b10c2912-65d1-4874-837b-340f2bbcec41&quot;,&quot;5770cb65-6a7e-4fab-8541-f2c669ae0f31&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9664,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;e3fad5a9-9209-431b-b497-260160da551d&quot;,&quot;title&quot;:&quot;Devices&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/device.test.js&quot;,&quot;file&quot;:&quot;/test/devices/device.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Devices \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1266,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n  withAdmin = await utils.getAdminAuth()\n  withNormal = await utils.getNormalAuth()\n  await deleteDevice(device.id).set(withAdmin)\n} catch (err) {\n  console.log(&#x27;error:&#x27; + err)\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;477dd297-08ef-45eb-a0e6-2ece91fafda8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Devices \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:608,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n  await deleteDevice(device.id).set(withAdmin)\n} catch (err) {\n  console.log(&#x27;error:&#x27; + err)\n  throw err\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e1866b42-9ab3-4585-b698-ec550c6e7fb3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8abcd3cc-4528-4985-9e24-b755c47b87b2&quot;,&quot;title&quot;:&quot;Get Permissions&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/device.test.js&quot;,&quot;file&quot;:&quot;/test/devices/device.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return permissions&quot;,&quot;fullTitle&quot;:&quot;Devices Get Permissions should return permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:361,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await getPermissions().set(withAdmin)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d131286d-583f-418c-8759-b3239a1e23c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;admin have permissions on device&quot;,&quot;fullTitle&quot;:&quot;Devices Get Permissions admin have permissions on device&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1082,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withNormal)\nlet res = await getPermissions().set(withAdmin)\nlet scopes = res.body.find(p =&gt; p.resource == device.id).scopes\nchai.expect(scopes).members([&#x27;devices:view&#x27;, &#x27;devices:update&#x27;, &#x27;devices:delete&#x27;, &#x27;devices-data:create&#x27;, &#x27;devices-data:view&#x27;]);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d8c4ae99-7e76-4ef5-90c4-2866bceb3432&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;admin have permissions on private device&quot;,&quot;fullTitle&quot;:&quot;Devices Get Permissions admin have permissions on private device&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:981,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice({...device, visibility: &#x27;private&#x27;}).set(withNormal)\nlet res = await getPermissions().set(withAdmin)\nlet scopes = res.body.find(p =&gt; p.resource == device.id).scopes\nchai.expect(scopes).members([&#x27;devices:view&#x27;, &#x27;devices:update&#x27;, &#x27;devices:delete&#x27;, &#x27;devices-data:create&#x27;, &#x27;devices-data:view&#x27;]);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b9c96d5d-5dd1-49b8-b53e-b5736598a0cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user have permissions on own device&quot;,&quot;fullTitle&quot;:&quot;Devices Get Permissions normal user have permissions on own device&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:832,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withNormal)\nlet res = await getPermissions().set(withNormal)\nlet scopes = res.body.find(p =&gt; p.resource == device.id).scopes\nchai.expect(scopes).members([&#x27;devices:view&#x27;, &#x27;devices:update&#x27;, &#x27;devices:delete&#x27;, &#x27;devices-data:create&#x27;, &#x27;devices-data:view&#x27;]);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a51e547d-896a-47dc-bfee-10e756678d54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user can see public device and add data&quot;,&quot;fullTitle&quot;:&quot;Devices Get Permissions normal user can see public device and add data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1018,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await getPermissions().set(withNormal)\nlet scopes = res.body.find(p =&gt; p.resource == device.id).scopes\nchai.expect(scopes).members([&#x27;devices:view&#x27;, &#x27;devices-data:view&#x27;, &#x27;devices-data:create&#x27;]);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e50a4922-c827-425b-901a-da27fd13ce90&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user cannot see private device&quot;,&quot;fullTitle&quot;:&quot;Devices Get Permissions normal user cannot see private device&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1126,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice({...device, visibility: &#x27;private&#x27;}).set(withAdmin)\nlet res = await getPermissions().set(withNormal)\nres.status.should.satisfy((s) =&gt; {\n  switch (s) {\n    case 200:\n      return ! res.body.map(s =&gt; s.id).includes(device.id);\n    case 403:\n      return true;\n    default:\n      return false;\n  }\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c1f1117a-e612-4e2e-bac5-9fb6f766b2cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d131286d-583f-418c-8759-b3239a1e23c1&quot;,&quot;d8c4ae99-7e76-4ef5-90c4-2866bceb3432&quot;,&quot;b9c96d5d-5dd1-49b8-b53e-b5736598a0cd&quot;,&quot;a51e547d-896a-47dc-bfee-10e756678d54&quot;,&quot;e50a4922-c827-425b-901a-da27fd13ce90&quot;,&quot;c1f1117a-e612-4e2e-bac5-9fb6f766b2cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5400,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;f0950279-07fd-46e0-9489-cc1dac52b9e5&quot;,&quot;title&quot;:&quot;Get Devices&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/device.test.js&quot;,&quot;file&quot;:&quot;/test/devices/device.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;admin can get devices&quot;,&quot;fullTitle&quot;:&quot;Devices Get Devices admin can get devices&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1579,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await getDevices().set(withAdmin)\nchai.expect(res.body.map(s =&gt; s.id)).to.include(device.id);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;960ad425-648b-4d8b-9baf-5b98a34664d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;admin can see private devices&quot;,&quot;fullTitle&quot;:&quot;Devices Get Devices admin can see private devices&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1317,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice({...device, visibility: &#x27;private&#x27;}).set(withNormal)\nlet res = await getDevices().set(withAdmin)\nchai.expect(res.body.map(s =&gt; s.id)).to.include(device.id);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;00c34901-d21c-44e6-82f2-160f944dab78&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user can see public devices&quot;,&quot;fullTitle&quot;:&quot;Devices Get Devices normal user can see public devices&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1427,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await getDevices().set(withNormal)\nchai.expect(res.body.map(s =&gt; s.id)).to.include(device.id);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7d3281b7-d056-47ef-ab0f-8f8484143872&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user can see own devices&quot;,&quot;fullTitle&quot;:&quot;Devices Get Devices normal user can see own devices&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1537,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice({...device, visibility: &#x27;private&#x27;}).set(withNormal)\nlet res = await getDevices().set(withNormal)\nchai.expect(res.body.map(s =&gt; s.id)).to.include(device.id);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6115cd0e-4347-4bc3-9c19-a5766a4e3ad5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user CANNOT see private devices&quot;,&quot;fullTitle&quot;:&quot;Devices Get Devices normal user CANNOT see private devices&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1536,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice({...device, visibility: &#x27;private&#x27;}).set(withAdmin)\nlet res = await getDevices().set(withNormal)\nres.status.should.satisfy((s) =&gt; {\n  switch (s) {\n    case 200:\n      return ! res.body.map(s =&gt; s.id).includes(device.id);\n    case 403:\n      return true;\n    default:\n      return false;\n  }\n});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1e4c95e9-6f60-4c12-924a-b5537d9ea6b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;960ad425-648b-4d8b-9baf-5b98a34664d9&quot;,&quot;00c34901-d21c-44e6-82f2-160f944dab78&quot;,&quot;7d3281b7-d056-47ef-ab0f-8f8484143872&quot;,&quot;6115cd0e-4347-4bc3-9c19-a5766a4e3ad5&quot;,&quot;1e4c95e9-6f60-4c12-924a-b5537d9ea6b4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7396,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;34899db7-8412-4bc7-9316-5098a6bb79b3&quot;,&quot;title&quot;:&quot;Create device&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/device.test.js&quot;,&quot;file&quot;:&quot;/test/devices/device.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;device is created by admin&quot;,&quot;fullTitle&quot;:&quot;Devices Create device device is created by admin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:713,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;console.log(\&quot;Before\&quot;)\nlet res = await createDevice(device).set(withAdmin)\nres.should.have.status(204);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fb9f5982-1257-45bd-8735-3cc8f5a62287&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;device is created by normal user&quot;,&quot;fullTitle&quot;:&quot;Devices Create device device is created by normal user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:614,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let res = await createDevice(device).set(withNormal)\nres.should.have.status(204);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c060bb2a-7634-4fbb-8129-325848b22a38&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;device with the same id is rejected&quot;,&quot;fullTitle&quot;:&quot;Devices Create device device with the same id is rejected&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:987,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await createDevice(device).set(withNormal)\nres.should.have.status(422);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d7d1f4d6-c790-4645-bff4-fc0731e2141d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;device with invalid data is rejected&quot;,&quot;fullTitle&quot;:&quot;Devices Create device device with invalid data is rejected&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:228,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let wrong = Object.assign({}, device)\ndelete(wrong.id)\nlet res = await createDevice(wrong).set(withAdmin)\nres.should.have.status(400);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0c18c1d8-4a45-497e-bd7c-8e8c3783ce07&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fb9f5982-1257-45bd-8735-3cc8f5a62287&quot;,&quot;c060bb2a-7634-4fbb-8129-325848b22a38&quot;,&quot;d7d1f4d6-c790-4645-bff4-fc0731e2141d&quot;,&quot;0c18c1d8-4a45-497e-bd7c-8e8c3783ce07&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2542,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;acbd88a3-16d8-4e17-9731-6bd9627f7d1f&quot;,&quot;title&quot;:&quot;Get a Single Device&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/device.test.js&quot;,&quot;file&quot;:&quot;/test/devices/device.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;retrieved device has all the correct values&quot;,&quot;fullTitle&quot;:&quot;Devices Get a Single Device retrieved device has all the correct values&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:957,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await getDevice(device.id).set(withAdmin)\nres.should.have.status(200);\nres.body.should.be.a(&#x27;object&#x27;);\n//all fields of original device should be here\nres.body.should.deep.include(device);\n//read-only fields should be here\nres.body.should.have.property(&#x27;date_created&#x27;);\nres.body.should.have.property(&#x27;date_modified&#x27;);\nres.body.should.have.property(&#x27;owner&#x27;).eql(\&quot;cdupont\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (keycloak_id, gateway_id, ...) } to have deep property &#x27;actuators&#x27; of [ Array(1) ], but got [ Array(1) ]&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (keycloak_id, gateway_id, ...) } to have deep property &#x27;actuators&#x27; of [ Array(1) ], but got [ Array(1) ]\n    at Proxy.assertProperty (node_modules/chai/lib/chai/core/assertions.js:1873:12)\n    at Proxy.methodWrapper (node_modules/chai/lib/chai/utils/addMethod.js:57:25)\n    at Proxy.&lt;anonymous&gt; (node_modules/chai/lib/chai/core/assertions.js:553:27)\n    at Array.forEach (&lt;anonymous&gt;)\n    at Proxy.include (node_modules/chai/lib/chai/core/assertions.js:547:15)\n    at Proxy.chainableMethodWrapper (node_modules/chai/lib/chai/utils/addChainableMethod.js:113:49)\n    at Context.it (test/devices/device.test.js:158:28)\n    at processTicksAndRejections (internal/process/next_tick.js:81:5)&quot;,&quot;diff&quot;:&quot; [\n   {\n     \&quot;actuator_kind\&quot;: \&quot;Buzzer\&quot;\n+     \&quot;actuator_value_type\&quot;: \&quot;ActString\&quot;\n     \&quot;id\&quot;: \&quot;Act1\&quot;\n     \&quot;name\&quot;: \&quot;My buzzer\&quot;\n     \&quot;value\&quot;: true\n   }\n&quot;},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ae7e31d0-eeb2-4b20-a83c-2d4ef1c47806&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;non existent id is rejected&quot;,&quot;fullTitle&quot;:&quot;Devices Get a Single Device non existent id is rejected&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:284,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let res = await getDevice(&#x27;this-id-does-not-exist&#x27;).set(withAdmin)\nres.should.have.status(404);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9204524d-44c5-422c-b454-f1f8e84ce0af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;admin can see private device&quot;,&quot;fullTitle&quot;:&quot;Devices Get a Single Device admin can see private device&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1029,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice({...device, visibility: &#x27;private&#x27;}).set(withNormal)\nlet res = await getDevice(device.id).set(withAdmin)\nres.body.should.have.property(&#x27;id&#x27;).eql(device.id);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b7982edb-8181-4f2b-a210-1ae0b5917bbf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user can see public device&quot;,&quot;fullTitle&quot;:&quot;Devices Get a Single Device normal user can see public device&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:848,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await getDevice(device.id).set(withNormal)\nres.body.should.have.property(&#x27;id&#x27;).eql(device.id);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;668b9be3-6328-4e1b-8be8-c34d91c39411&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user can see own device&quot;,&quot;fullTitle&quot;:&quot;Devices Get a Single Device normal user can see own device&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:804,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice({...device, visibility: &#x27;private&#x27;}).set(withNormal)\nlet res = await getDevice(device.id).set(withNormal)\nres.body.should.have.property(&#x27;id&#x27;).eql(device.id);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8b92e912-9366-42ef-b7f3-c031d6a8ec9e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user CANNOT see private device&quot;,&quot;fullTitle&quot;:&quot;Devices Get a Single Device normal user CANNOT see private device&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1023,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice({...device, visibility: &#x27;private&#x27;}).set(withAdmin)\nlet res = await getDevice(device.id).set(withNormal)\nres.should.have.status(403);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ff8787ec-8dd7-40c8-814a-b2de58af4b61&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9204524d-44c5-422c-b454-f1f8e84ce0af&quot;,&quot;b7982edb-8181-4f2b-a210-1ae0b5917bbf&quot;,&quot;668b9be3-6328-4e1b-8be8-c34d91c39411&quot;,&quot;8b92e912-9366-42ef-b7f3-c031d6a8ec9e&quot;,&quot;ff8787ec-8dd7-40c8-814a-b2de58af4b61&quot;],&quot;failures&quot;:[&quot;ae7e31d0-eeb2-4b20-a83c-2d4ef1c47806&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4945,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;e447163e-a124-4f0e-bdb6-ff6494fa7674&quot;,&quot;title&quot;:&quot;Insert Name&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/device.test.js&quot;,&quot;file&quot;:&quot;/test/devices/device.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;name field should be updated&quot;,&quot;fullTitle&quot;:&quot;Devices Insert Name name field should be updated&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1206,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await setDeviceAttr(device.id, \&quot;name\&quot;, \&quot;SEN1\&quot;).set(withAdmin)\nres.should.have.status(204);\nlet res2 = await getDevice(device.id).set(withAdmin);\nres2.body.should.have.property(&#x27;name&#x27;).eql(&#x27;SEN1&#x27;);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;16cd4d39-c850-4c4f-aeb5-9db995a6fe4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user can update own device&quot;,&quot;fullTitle&quot;:&quot;Devices Insert Name normal user can update own device&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1216,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withNormal)\nlet res = await setDeviceAttr(device.id, \&quot;name\&quot;, \&quot;SEN1\&quot;).set(withNormal)\nlet res2 = await getDevice(device.id).set(withNormal);\nres2.body.should.have.property(&#x27;name&#x27;).eql(&#x27;SEN1&#x27;);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a4ae329b-226a-4b59-9021-cc465244b8fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user CANNOT update device that he does not own&quot;,&quot;fullTitle&quot;:&quot;Devices Insert Name normal user CANNOT update device that he does not own&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1127,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await setDeviceAttr(device.id, \&quot;name\&quot;, \&quot;SEN1\&quot;).set(withNormal)\nres.should.have.status(403);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ea7d26a3-4f58-4f7f-8ae1-3377baf4993e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;16cd4d39-c850-4c4f-aeb5-9db995a6fe4c&quot;,&quot;a4ae329b-226a-4b59-9021-cc465244b8fe&quot;,&quot;ea7d26a3-4f58-4f7f-8ae1-3377baf4993e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3549,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;a4479ed8-cc9e-4c0a-8ddc-d5d67a935a0d&quot;,&quot;title&quot;:&quot;Insert Location&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/device.test.js&quot;,&quot;file&quot;:&quot;/test/devices/device.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Location field should be updated&quot;,&quot;fullTitle&quot;:&quot;Devices Insert Location Location field should be updated&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1760,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await setDeviceLocation(device.id, {latitude: 5.36, longitude: 4.0083}).set(withAdmin)\nres.should.have.status(204);\nlet res2 = await getDevice(device.id).set(withAdmin)\nres2.body.should.have.property(&#x27;location&#x27;).eql({\&quot;latitude\&quot;: 5.36, \&quot;longitude\&quot;: 4.0083});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c7e18aee-540e-4671-b41a-1d538bbb3513&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c7e18aee-540e-4671-b41a-1d538bbb3513&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1760,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;2683e3e3-87d9-4c40-a2da-efef72d14f00&quot;,&quot;title&quot;:&quot;Insert Gateway&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/device.test.js&quot;,&quot;file&quot;:&quot;/test/devices/device.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gateway field should be updated&quot;,&quot;fullTitle&quot;:&quot;Devices Insert Gateway gateway field should be updated&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1439,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await setDeviceAttr(device.id, \&quot;gateway_id\&quot;, \&quot;GW1\&quot;).set(withAdmin)\nres.should.have.status(204);\nlet res2 = await getDevice(device.id).set(withAdmin);\nres2.body.should.have.property(&#x27;gateway_id&#x27;).eql(&#x27;GW1&#x27;);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d01072e3-68bf-4c6a-bd8d-8f0137927e5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d01072e3-68bf-4c6a-bd8d-8f0137927e5f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1439,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;70143c80-b996-402c-b6b0-6d57e34576cf&quot;,&quot;title&quot;:&quot;Remove Device&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/device.test.js&quot;,&quot;file&quot;:&quot;/test/devices/device.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;admin can remove own device&quot;,&quot;fullTitle&quot;:&quot;Devices Remove Device admin can remove own device&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1413,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await deleteDevice(device.id).set(withAdmin)\nres.should.have.status(204);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;05f47039-b2ec-4579-9742-eb475e91f282&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;admin can remove other device&quot;,&quot;fullTitle&quot;:&quot;Devices Remove Device admin can remove other device&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1276,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withNormal)\nlet res = await deleteDevice(device.id).set(withAdmin)\nres.should.have.status(204);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d36f90c3-a8e9-4495-94e4-411c5b9516f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user can remove own device&quot;,&quot;fullTitle&quot;:&quot;Devices Remove Device normal user can remove own device&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1217,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withNormal)\nlet res = await deleteDevice(device.id).set(withNormal)\nres.should.have.status(204);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ef4c1ac9-4cdc-40b5-8a6b-514c21f66210&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user CANNOT remove device owned by other&quot;,&quot;fullTitle&quot;:&quot;Devices Remove Device normal user CANNOT remove device owned by other&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1174,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await deleteDevice(device.id).set(withNormal)\nres.should.have.status(403);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;42fd15ab-47c8-4036-8522-90d51b38f9c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;05f47039-b2ec-4579-9742-eb475e91f282&quot;,&quot;d36f90c3-a8e9-4495-94e4-411c5b9516f1&quot;,&quot;ef4c1ac9-4cdc-40b5-8a6b-514c21f66210&quot;,&quot;42fd15ab-47c8-4036-8522-90d51b38f9c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5080,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;5caecd70-0bb9-49b0-8608-b728804c3b44&quot;,&quot;title&quot;:&quot;Sensors&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/sensor.test.js&quot;,&quot;file&quot;:&quot;/test/devices/sensor.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Sensors \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1329,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n  withAdmin = await utils.getAdminAuth()\n  withNormal = await utils.getNormalAuth()\n  await deleteDevice(device.id).set(withAdmin)\n} catch (err) {\n  console.log(&#x27;error:&#x27; + err)\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5bdaf494-310d-4140-9c83-a2babf4191a9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Sensors \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:454,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n  await deleteDevice(device.id).set(withAdmin)\n} catch (err) {\n  console.log(&#x27;error:&#x27; + err)\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;dcc681b5-57b8-4e49-91c5-488cac430336&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;273488ff-a42d-42a8-b7a8-9347a107cac5&quot;,&quot;title&quot;:&quot;Get Sensors&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/sensor.test.js&quot;,&quot;file&quot;:&quot;/test/devices/sensor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;sensors are returned in an array&quot;,&quot;fullTitle&quot;:&quot;Sensors Get Sensors sensors are returned in an array&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1072,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await getSensors().set(withAdmin)\nres.should.have.status(200);\nchai.expect(res.body.map(m =&gt; m.id)).to.have.members(device.sensors.map(m =&gt; m.id));&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;48b141e8-2b2f-4dfe-b4c2-f087d9dd9819&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user CANNOT see private sensors&quot;,&quot;fullTitle&quot;:&quot;Sensors Get Sensors normal user CANNOT see private sensors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1022,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice({...device, visibility:&#x27;private&#x27;}).set(withAdmin)\nlet res = await getSensors().set(withNormal)\nres.should.have.status(403);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4e5c9346-29b7-4a88-9a04-976040800351&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;48b141e8-2b2f-4dfe-b4c2-f087d9dd9819&quot;,&quot;4e5c9346-29b7-4a88-9a04-976040800351&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2094,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;a4774fb8-1e35-412c-b0ce-1c48964685a2&quot;,&quot;title&quot;:&quot;Create sensor&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/sensor.test.js&quot;,&quot;file&quot;:&quot;/test/devices/sensor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;admin can create a sensor&quot;,&quot;fullTitle&quot;:&quot;Sensors Create sensor admin can create a sensor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1010,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await createSensor(sensor).set(withAdmin)\nres.should.have.status(204);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8d32f476-a48e-4947-94e6-8512b99fb6db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user can create a sensor on his own device&quot;,&quot;fullTitle&quot;:&quot;Sensors Create sensor normal user can create a sensor on his own device&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:910,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withNormal)\nlet res = await createSensor(sensor).set(withNormal)\nres.should.have.status(204);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f5e5f64d-807f-4202-8137-c1b6506d8378&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user CANNOT create a sensor on a device owned by other&quot;,&quot;fullTitle&quot;:&quot;Sensors Create sensor normal user CANNOT create a sensor on a device owned by other&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1129,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await createSensor(sensor).set(withNormal)\nres.should.have.status(403);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2a3b55c0-38fb-4bf6-a4df-dd9b5fa6d46a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8d32f476-a48e-4947-94e6-8512b99fb6db&quot;,&quot;f5e5f64d-807f-4202-8137-c1b6506d8378&quot;,&quot;2a3b55c0-38fb-4bf6-a4df-dd9b5fa6d46a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3049,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;7101b5b6-8800-4a92-b5cd-84432c0202ca&quot;,&quot;title&quot;:&quot;Get a single Sensor&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/sensor.test.js&quot;,&quot;file&quot;:&quot;/test/devices/sensor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;retrieved sensor values are correct&quot;,&quot;fullTitle&quot;:&quot;Sensors Get a single Sensor retrieved sensor values are correct&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1128,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await getSensor(sensor.id).set(withAdmin)\nres.should.have.status(200);\n//all fields of original device should be here\nres.body.should.deep.include(sensor);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;329cce19-a720-4c65-909c-5a6196396bfb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;329cce19-a720-4c65-909c-5a6196396bfb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1128,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;ace4982b-0470-4b78-a233-afac618774da&quot;,&quot;title&quot;:&quot;Update Name of a Sensor&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/sensor.test.js&quot;,&quot;file&quot;:&quot;/test/devices/sensor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;name of sensor is updated&quot;,&quot;fullTitle&quot;:&quot;Sensors Update Name of a Sensor name of sensor is updated&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1534,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await putSensorAttr(sensor.id, \&quot;name\&quot;, \&quot;ss1\&quot;).set(withAdmin)\nres.should.have.status(204);\nlet res2 = await getSensor(sensor.id).set(withAdmin)\nres2.body.should.have.property(&#x27;name&#x27;).eql(&#x27;ss1&#x27;);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9b29de17-5dcf-4dfa-aa7d-fcafb2a9249e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user CANNOT update attribute of device that he does not own&quot;,&quot;fullTitle&quot;:&quot;Sensors Update Name of a Sensor normal user CANNOT update attribute of device that he does not own&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1124,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await putSensorAttr(sensor.id, \&quot;name\&quot;, \&quot;ss1\&quot;).set(withNormal)\nres.should.have.status(403);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d9989b02-c7ca-45f4-85d7-1d8af1e26cdd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9b29de17-5dcf-4dfa-aa7d-fcafb2a9249e&quot;,&quot;d9989b02-c7ca-45f4-85d7-1d8af1e26cdd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2658,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;f4b53f43-9014-4994-bf28-09f530eae264&quot;,&quot;title&quot;:&quot;Update quantity kind of a Sensor&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/sensor.test.js&quot;,&quot;file&quot;:&quot;/test/devices/sensor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;quantity kind is updated&quot;,&quot;fullTitle&quot;:&quot;Sensors Update quantity kind of a Sensor quantity kind is updated&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1588,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await putSensorAttr(sensor.id, \&quot;quantity_kind\&quot;, \&quot;Temperature\&quot;).set(withAdmin)\nres.should.have.status(204);\nlet res2 = await getSensor(sensor.id).set(withAdmin)\nres2.body.should.have.property(&#x27;quantity_kind&#x27;).eql(&#x27;Temperature&#x27;);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8c560b6c-bea0-4aa4-94e1-9368c2d439bd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8c560b6c-bea0-4aa4-94e1-9368c2d439bd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1588,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;0ecce267-5814-479b-a11e-ab9a82b8850b&quot;,&quot;title&quot;:&quot;Update sensing device&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/sensor.test.js&quot;,&quot;file&quot;:&quot;/test/devices/sensor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;sensing device is updated&quot;,&quot;fullTitle&quot;:&quot;Sensors Update sensing device sensing device is updated&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1537,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await putSensorAttr(sensor.id, \&quot;sensor_kind\&quot;, \&quot;Thermometer\&quot;).set(withAdmin)\nres.should.have.status(204);\nlet res2 = await getSensor(sensor.id).set(withAdmin)\nres2.body.should.have.property(&#x27;sensor_kind&#x27;).eql(&#x27;Thermometer&#x27;);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;950b49b1-1f25-4567-8d85-9259578f5ff5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;950b49b1-1f25-4567-8d85-9259578f5ff5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1537,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;49e2f026-4a74-4bf5-84cc-492a29cfa59a&quot;,&quot;title&quot;:&quot;Update unit&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/sensor.test.js&quot;,&quot;file&quot;:&quot;/test/devices/sensor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;unit should be updated&quot;,&quot;fullTitle&quot;:&quot;Sensors Update unit unit should be updated&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1741,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await putSensorAttr(sensor.id, \&quot;unit\&quot;, \&quot;DegreeCelcius\&quot;).set(withAdmin)\nres.should.have.status(204);\nlet res2 = await getSensor(sensor.id).set(withAdmin)\nres2.body.should.have.property(&#x27;unit&#x27;).eql(&#x27;DegreeCelcius&#x27;);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7040495c-06a6-460d-ad33-3e4d7ccc680f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7040495c-06a6-460d-ad33-3e4d7ccc680f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1741,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;b4a7be2e-1275-495e-8962-8874242c086a&quot;,&quot;title&quot;:&quot;push sensor value&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/devices/sensor.test.js&quot;,&quot;file&quot;:&quot;/test/devices/sensor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;value is pushed&quot;,&quot;fullTitle&quot;:&quot;Sensors push sensor value value is pushed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1849,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await pushSensorValue(sensor.id, {\&quot;value\&quot;: \&quot;25.6\&quot;, \&quot;timestamp\&quot;: \&quot;2016-06-08T18:20:27.873Z\&quot;})\nres.should.have.status(204);\nlet res2 = await getSensor(sensor.id).set(withAdmin)\nres2.body.value.should.deep.include({\&quot;value\&quot;: \&quot;25.6\&quot;, \&quot;timestamp\&quot;: \&quot;2016-06-08T18:20:27Z\&quot;});\nres2.body.value.should.have.property(&#x27;date_received&#x27;);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5034b7b2-e349-40b0-9b17-532a98083963&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user can push on public device&quot;,&quot;fullTitle&quot;:&quot;Sensors push sensor value normal user can push on public device&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1432,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await pushSensorValue(sensor.id, {\&quot;value\&quot;: \&quot;25.6\&quot;, \&quot;timestamp\&quot;: \&quot;2016-06-08T18:20:27.873Z\&quot;})\nres.should.have.status(204);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a95c7d76-a6ea-4b7a-9974-ea729427c968&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;normal user CANNOT push on private device&quot;,&quot;fullTitle&quot;:&quot;Sensors push sensor value normal user CANNOT push on private device&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1245,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice({...device, visibility: &#x27;private&#x27;}).set(withAdmin)\nlet res = await pushSensorValue(sensor.id, {\&quot;value\&quot;: \&quot;25.6\&quot;, \&quot;timestamp\&quot;: \&quot;2016-06-08T18:20:27Z\&quot;}).set(withNormal)\nres.should.have.status(403);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b90b99a2-c1f2-464b-a9de-cfc3a7947c65&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;number value is pushed&quot;,&quot;fullTitle&quot;:&quot;Sensors push sensor value number value is pushed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2061,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await pushSensorValue(sensor.id, {\&quot;value\&quot;: 25.6})\nres.should.have.status(204);\nlet res2 = await getSensor(sensor.id).set(withAdmin)\nres2.body.value.should.deep.include({\&quot;value\&quot;: 25.6});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;36636050-e89f-426c-ac26-2d0554bdbb37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;string value is pushed&quot;,&quot;fullTitle&quot;:&quot;Sensors push sensor value string value is pushed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2264,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await pushSensorValue(sensor.id, {\&quot;value\&quot;: \&quot;A\&quot;})\nres.should.have.status(204);\nlet res2 = await getSensor(sensor.id).set(withAdmin)\nres2.body.value.should.deep.include({\&quot;value\&quot;: \&quot;A\&quot;});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2b1bf4b8-f00a-45c8-91c4-041b33b46bc5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;boolean value is pushed&quot;,&quot;fullTitle&quot;:&quot;Sensors push sensor value boolean value is pushed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1747,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await pushSensorValue(sensor.id, {\&quot;value\&quot;: true})\nres.should.have.status(204);\nlet res2 = await getSensor(sensor.id).set(withAdmin)\nres2.body.value.should.deep.include({\&quot;value\&quot;: true});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9f3d2d46-128b-46ae-9dea-03550c89657e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;array value is pushed&quot;,&quot;fullTitle&quot;:&quot;Sensors push sensor value array value is pushed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1843,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await pushSensorValue(sensor.id, {\&quot;value\&quot;: [true]})\nres.should.have.status(204);\nlet res2 = await getSensor(sensor.id).set(withAdmin)\nres2.body.value.should.deep.include({\&quot;value\&quot;: [true]});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3ffbf255-f670-43a6-9107-124582cb1fc4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;object value is pushed&quot;,&quot;fullTitle&quot;:&quot;Sensors push sensor value object value is pushed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1646,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createDevice(device).set(withAdmin)\nlet res = await pushSensorValue(sensor.id, {\&quot;value\&quot;: {a:1, b:\&quot;2\&quot;}})\nres.should.have.status(204);\nlet res2 = await getSensor(sensor.id).set(withAdmin)\nres2.body.value.should.deep.include({\&quot;value\&quot;: {a:1, b:\&quot;2\&quot;}});&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;72f8d26d-e7d2-4099-8290-09751cd7d044&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5034b7b2-e349-40b0-9b17-532a98083963&quot;,&quot;a95c7d76-a6ea-4b7a-9974-ea729427c968&quot;,&quot;b90b99a2-c1f2-464b-a9de-cfc3a7947c65&quot;,&quot;36636050-e89f-426c-ac26-2d0554bdbb37&quot;,&quot;2b1bf4b8-f00a-45c8-91c4-041b33b46bc5&quot;,&quot;9f3d2d46-128b-46ae-9dea-03550c89657e&quot;,&quot;3ffbf255-f670-43a6-9107-124582cb1fc4&quot;,&quot;72f8d26d-e7d2-4099-8290-09751cd7d044&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14087,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;1f25186d-be49-4776-a193-3f3946bf07b3&quot;,&quot;title&quot;:&quot;Socials&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/notif/socials.test.js&quot;,&quot;file&quot;:&quot;/test/notif/socials.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Socials \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:837,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n  withAdmin = await utils.getAdminAuth()\n  withNormal = await utils.getNormalAuth()\n} catch (err) {\n  console.log(&#x27;error:&#x27; + err)\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;22e1e096-03e1-4799-8994-07aaede9b326&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8ee23a22-3d7b-498a-8580-f7a641b55462&quot;,&quot;title&quot;:&quot;Get all messages sent&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/notif/socials.test.js&quot;,&quot;file&quot;:&quot;/test/notif/socials.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all the messages sent&quot;,&quot;fullTitle&quot;:&quot;Socials Get all messages sent it should GET all the messages sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let res = await getSocialMsgs().set(withNormal)\nres.should.have.status(200);\nres.body.should.be.a(&#x27;array&#x27;);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;246e69f9-495a-4576-9e32-01006a5dc22c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;246e69f9-495a-4576-9e32-01006a5dc22c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:204,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;6bd83ad4-ecc9-4e39-9293-b8127d58091c&quot;,&quot;title&quot;:&quot;post a message to social networks&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/notif/socials.test.js&quot;,&quot;file&quot;:&quot;/test/notif/socials.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should post a message to twitter&quot;,&quot;fullTitle&quot;:&quot;Socials post a message to social networks it should post a message to twitter&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:258,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let res = await postSocialMsg(socialData).set(withNormal)\nres.should.have.status(200);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 200 but got 400&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 200 but got 400\n    at Proxy.&lt;anonymous&gt; (node_modules/chai-http/lib/http.js:92:10)\n    at Proxy.methodWrapper (node_modules/chai/lib/chai/utils/addMethod.js:57:25)\n    at Context.it (test/notif/socials.test.js:39:23)\n    at processTicksAndRejections (internal/process/next_tick.js:81:5)&quot;,&quot;diff&quot;:&quot;- 400\n+ 200\n&quot;},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a2bd37d9-e615-4b17-98a0-b6e80f5622dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should fail with bad username&quot;,&quot;fullTitle&quot;:&quot;Socials post a message to social networks it should fail with bad username&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:241,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let res = await postSocialMsg({...socialData, username: \&quot;5sd54fd5zryetasgsds444444ddd\&quot;}).set(withNormal)\nres.should.have.status(500);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 500 but got 400&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 500 but got 400\n    at Proxy.&lt;anonymous&gt; (node_modules/chai-http/lib/http.js:92:10)\n    at Proxy.methodWrapper (node_modules/chai/lib/chai/utils/addMethod.js:57:25)\n    at Context.it (test/notif/socials.test.js:43:23)\n    at processTicksAndRejections (internal/process/next_tick.js:81:5)&quot;,&quot;diff&quot;:&quot;- 400\n+ 500\n&quot;},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c3f806bf-d8f2-414f-9125-4e690059e7bb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;a2bd37d9-e615-4b17-98a0-b6e80f5622dd&quot;,&quot;c3f806bf-d8f2-414f-9125-4e690059e7bb&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:499,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;74d4d3d8-3534-41d6-8d14-fb6f39cf3f13&quot;,&quot;title&quot;:&quot;Get one message sent&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/notif/socials.test.js&quot;,&quot;file&quot;:&quot;/test/notif/socials.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET the messages sent&quot;,&quot;fullTitle&quot;:&quot;Socials Get one message sent it should GET the messages sent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:true,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f7615406-6689-4b94-821f-ab82cc2d3936&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[&quot;f7615406-6689-4b94-821f-ab82cc2d3936&quot;],&quot;skipped&quot;:[],&quot;duration&quot;:null,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;f342e78f-7693-46b4-8415-93e8d2c128aa&quot;,&quot;title&quot;:&quot;Notifications&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/notif/notifications.test.js&quot;,&quot;file&quot;:&quot;/test/notif/notifications.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Notifications \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:958,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n  withAdmin = await utils.getAdminAuth()\n  withNormal = await utils.getNormalAuth()\n  //let res = await createSensor(sensor).set(withAdmin)\n} catch (err) {\n  console.log(&#x27;error:&#x27; + err)\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;576fc6d6-90fd-42ab-8283-60dc551bec0d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Notifications \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;try {\n  //await deleteSensor(sensor.id).set(withAdmin)\n} catch (err) {\n  console.log(&#x27;error:&#x27; + err)\n}&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;837311ad-ea90-43b9-b36a-c2c8fddf0fbe&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4c33d71e-9484-430d-85f2-d9bd105cd731&quot;,&quot;title&quot;:&quot;Get notifications&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/notif/notifications.test.js&quot;,&quot;file&quot;:&quot;/test/notif/notifications.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all the notifications&quot;,&quot;fullTitle&quot;:&quot;Notifications Get notifications it should GET all the notifications&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:482,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createNotif(notif).set(withAdmin)\nlet res = await getNotifs()\nres.should.have.status(200);\nres.body.should.be.a(&#x27;array&#x27;);\nawait deleteNotif(res.text)&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 200 but got 500&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 200 but got 500\n    at Proxy.&lt;anonymous&gt; (node_modules/chai-http/lib/http.js:92:10)\n    at Proxy.methodWrapper (node_modules/chai/lib/chai/utils/addMethod.js:57:25)\n    at Context.it (test/notif/notifications.test.js:51:23)\n    at processTicksAndRejections (internal/process/next_tick.js:81:5)&quot;,&quot;diff&quot;:&quot;- 500\n+ 200\n&quot;},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cd2296e4-33bb-471d-aacf-c8032371c2da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;cd2296e4-33bb-471d-aacf-c8032371c2da&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:482,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;bf48e9f2-4684-4aaf-96b6-d82853de3209&quot;,&quot;title&quot;:&quot;Create notifications&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/notif/notifications.test.js&quot;,&quot;file&quot;:&quot;/test/notif/notifications.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;notification is created&quot;,&quot;fullTitle&quot;:&quot;Notifications Create notifications notification is created&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:238,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;res = await createNotif(notif).set(withAdmin)\nres.should.have.status(200);\nres.text.should.be.a(&#x27;string&#x27;);\nawait deleteNotif(res.text)&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 200 but got 400&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 200 but got 400\n    at Proxy.&lt;anonymous&gt; (node_modules/chai-http/lib/http.js:92:10)\n    at Proxy.methodWrapper (node_modules/chai/lib/chai/utils/addMethod.js:57:25)\n    at Context.it (test/notif/notifications.test.js:59:23)\n    at processTicksAndRejections (internal/process/next_tick.js:81:5)&quot;,&quot;diff&quot;:&quot;- 400\n+ 200\n&quot;},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;39dd3e3c-01af-4c7d-a7ab-f5ae7fb1072b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;39dd3e3c-01af-4c7d-a7ab-f5ae7fb1072b&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:238,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;85197163-c89a-437a-8bda-02b4a4e5e664&quot;,&quot;title&quot;:&quot;Get one notification&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/notif/notifications.test.js&quot;,&quot;file&quot;:&quot;/test/notif/notifications.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;retrieved notification has all correct values&quot;,&quot;fullTitle&quot;:&quot;Notifications Get one notification retrieved notification has all correct values&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:377,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let res = await createNotif(notif).set(withAdmin)\nlet res2 = await getNotif(res.text)\nres2.should.have.status(200);\n//all fields of original notif should be here\nres2.body.should.deep.include(notif);\nres2.body.should.have.property(&#x27;status&#x27;).eql(\&quot;active\&quot;);\nawait deleteNotif(res.text)&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 200 but got 500&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 200 but got 500\n    at Proxy.&lt;anonymous&gt; (node_modules/chai-http/lib/http.js:92:10)\n    at Proxy.methodWrapper (node_modules/chai/lib/chai/utils/addMethod.js:57:25)\n    at Context.it (test/notif/notifications.test.js:68:24)\n    at processTicksAndRejections (internal/process/next_tick.js:81:5)&quot;,&quot;diff&quot;:&quot;- 500\n+ 200\n&quot;},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6c0391f5-180c-4bc3-9d5d-9abfe27f803e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should return not found for notification that doesnt exist&quot;,&quot;fullTitle&quot;:&quot;Notifications Get one notification it should return not found for notification that doesnt exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:247,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let res = await getNotif(123)\nres.should.have.status(400);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 400 but got 500&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 400 but got 500\n    at Proxy.&lt;anonymous&gt; (node_modules/chai-http/lib/http.js:92:10)\n    at Proxy.methodWrapper (node_modules/chai/lib/chai/utils/addMethod.js:57:25)\n    at Context.it (test/notif/notifications.test.js:76:23)\n    at processTicksAndRejections (internal/process/next_tick.js:81:5)&quot;,&quot;diff&quot;:&quot;- 500\n+ 400\n&quot;},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;991dc444-4444-4db8-b6ae-34eae51cf1a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;6c0391f5-180c-4bc3-9d5d-9abfe27f803e&quot;,&quot;991dc444-4444-4db8-b6ae-34eae51cf1a5&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:624,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;dec83a82-9c1e-4ea0-bd3b-2af3ac22cf2d&quot;,&quot;title&quot;:&quot;delete a notification&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/notif/notifications.test.js&quot;,&quot;file&quot;:&quot;/test/notif/notifications.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should delete a message to social networks&quot;,&quot;fullTitle&quot;:&quot;Notifications delete a notification it should delete a message to social networks&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:462,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;res = await createNotif(notif)\nlet res2 = await deleteNotif(res.text)\nres2.should.have.status(200);\nawait deleteNotif(res.text)&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 200 but got 500&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 200 but got 500\n    at Proxy.&lt;anonymous&gt; (node_modules/chai-http/lib/http.js:92:10)\n    at Proxy.methodWrapper (node_modules/chai/lib/chai/utils/addMethod.js:57:25)\n    at Context.it (test/notif/notifications.test.js:83:24)\n    at processTicksAndRejections (internal/process/next_tick.js:81:5)&quot;,&quot;diff&quot;:&quot;- 500\n+ 200\n&quot;},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e9313d4d-95d7-4836-beff-2ab209913d48&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should return not found for notif that doesnt exist&quot;,&quot;fullTitle&quot;:&quot;Notifications delete a notification it should return not found for notif that doesnt exist&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:243,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let res = await deleteNotif(123)\nres.should.have.status(404);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 404 but got 500&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Object (_events, _eventsCount, ...) } to have status code 404 but got 500\n    at Proxy.&lt;anonymous&gt; (node_modules/chai-http/lib/http.js:92:10)\n    at Proxy.methodWrapper (node_modules/chai/lib/chai/utils/addMethod.js:57:25)\n    at Context.it (test/notif/notifications.test.js:88:23)\n    at processTicksAndRejections (internal/process/next_tick.js:81:5)&quot;,&quot;diff&quot;:&quot;- 500\n+ 404\n&quot;},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;da5961fb-69cf-4318-bbbc-45d49131b256&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;e9313d4d-95d7-4836-beff-2ab209913d48&quot;,&quot;da5961fb-69cf-4318-bbbc-45d49131b256&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:705,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000},{&quot;uuid&quot;:&quot;5d33eb26-af16-4e5c-a95c-5196a8cf895f&quot;,&quot;title&quot;:&quot;Trigger notifications&quot;,&quot;fullFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/test/notif/notifications.test.js&quot;,&quot;file&quot;:&quot;/test/notif/notifications.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Notifications Trigger notifications \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:473,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await createSensor(sensor).set(withAdmin)\nawait pushMeasValue(\&quot;TC1\&quot;, {\&quot;value\&quot;: 10}).set(withAdmin)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c5a24092-bae1-4561-9392-4a38aa04af23&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Notifications Trigger notifications \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:202,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await deleteSensor(sensor.id).set(withAdmin)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ad49f12c-f8a4-42a1-8659-6fc4d722be5f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Message should be sent upon notification creation&quot;,&quot;fullTitle&quot;:&quot;Notifications Trigger notifications Message should be sent upon notification creation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:750,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;utils.sleep(5000)\nlet res = await createNotif(notif).set(withAdmin)\nutils.sleep(1000)\nawait pushMeasValue(\&quot;TC1\&quot;, {\&quot;value\&quot;: 10}).set(withAdmin) \nutils.sleep(2000)\nawait pushMeasValue(\&quot;TC1\&quot;, {\&quot;value\&quot;: 11}).set(withAdmin) \nutils.sleep(1000)\nlet res2 = await getNotif(res.text)\n//fields showing that the notification has been sent\nres2.body.should.have.property(&#x27;last_notification&#x27;);\nres2.body.should.have.property(&#x27;times_sent&#x27;).eql(2);\nawait deleteNotif(res.text)&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected {} to have property &#x27;last_notification&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected {} to have property &#x27;last_notification&#x27;\n    at Proxy.assertProperty (node_modules/chai/lib/chai/core/assertions.js:1866:12)\n    at Proxy.methodWrapper (node_modules/chai/lib/chai/utils/addMethod.js:57:25)\n    at Context.it (test/notif/notifications.test.js:110:29)\n    at processTicksAndRejections (internal/process/next_tick.js:81:5)&quot;},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0218f1db-de12-4981-afb2-c866f6dbe657&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;inactive notification should do nothing&quot;,&quot;fullTitle&quot;:&quot;Notifications Trigger notifications inactive notification should do nothing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:878,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let res = await createNotif(notif).set(withAdmin)\nawait putNotifStatus(res.text, \&quot;inactive\&quot;)\nawait pushMeasValue(\&quot;TC1\&quot;, {\&quot;value\&quot;: 10}).set(withAdmin) \nlet res2 = await getNotif(res.text)\n//all fields of original notif should be here\nres2.body.should.have.property(&#x27;status&#x27;).eql(\&quot;inactive\&quot;);\nres2.body.should.have.property(&#x27;times_sent&#x27;).eql(1);\nawait deleteNotif(res.text)&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected {} to have property &#x27;status&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected {} to have property &#x27;status&#x27;\n    at Proxy.assertProperty (node_modules/chai/lib/chai/core/assertions.js:1866:12)\n    at Proxy.methodWrapper (node_modules/chai/lib/chai/utils/addMethod.js:57:25)\n    at Context.it (test/notif/notifications.test.js:120:29)\n    at processTicksAndRejections (internal/process/next_tick.js:81:5)&quot;},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;33a34bd4-8392-40db-b40d-c3777a773a87&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;0218f1db-de12-4981-afb2-c866f6dbe657&quot;,&quot;33a34bd4-8392-40db-b40d-c3777a773a87&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1628,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:40000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:40000},&quot;copyrightYear&quot;:2019}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;tests&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:true,&quot;enableCharts&quot;:true,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/mehdi/git/forks/Platform/tests/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>